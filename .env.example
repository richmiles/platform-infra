# Platform Infrastructure Environment Variables
# Copy this to .env and fill in real values

# =============================================================================
# Postgres (root user)
# =============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me-postgres-root-password

# =============================================================================
# DigitalOcean Spaces (shared object storage) - Optional
# =============================================================================
SPACES_BUCKET=platform-storage
SPACES_ACCESS_KEY=  # Optional - leave empty to disable object storage
SPACES_SECRET_KEY=  # Optional - leave empty to disable object storage
SPACES_REGION=nyc3
SPACES_ENDPOINT=https://nyc3.digitaloceanspaces.com

# =============================================================================
# IEOMD
# =============================================================================
IEOMD_DB_USER=ieomd
IEOMD_DB_PASSWORD=change-me-ieomd-password
IEOMD_DB_NAME=ieomd_db
IEOMD_CORS_ORIGINS=["https://ieomd.com"]
IEOMD_IMAGE_TAG=latest  # or sha-xxxxxxx for specific version
IEOMD_OBJECT_STORAGE_ENABLED=false  # Set to true after configuring Spaces credentials
IEOMD_OBJECT_STORAGE_PREFIX=ieomd  # Prefix within SPACES_BUCKET (e.g., ieomd/attachments/...)

# Matrix Notifications (optional - for ops alerts)
MATRIX_HOMESERVER_URL=https://chat.sparkswarm.com
MATRIX_ACCESS_TOKEN=  # Get from Matrix after login
MATRIX_ROOM_ID=  # Room ID (e.g., !XePGCWWUYKVUBZmFad:chat.sparkswarm.com)

# BTCPay Server (payment processing)
BTCPAY_WEBHOOK_SECRET=  # From BTCPay Store Settings > Webhooks

# =============================================================================
# Noodle
# =============================================================================
NOODLE_IMAGE_TAG=latest  # or sha-xxxxxxx

# =============================================================================
# Umami
# =============================================================================
UMAMI_DB_USER=umami
UMAMI_DB_PASSWORD=change-me-umami-password
UMAMI_DB_NAME=umami_db
# Generate with: openssl rand -base64 32
UMAMI_APP_SECRET=change-me-generate-random-secret

# =============================================================================
# Synapse (Matrix) - SparkSwarm ops chat
# =============================================================================
SYNAPSE_DB_USER=synapse
SYNAPSE_DB_PASSWORD=change-me-synapse-password
SYNAPSE_DB_NAME=synapse_db

# =============================================================================
# Human Index
# =============================================================================
HUMAN_INDEX_DB_USER=human_index
HUMAN_INDEX_DB_PASSWORD=change-me-human-index-password
HUMAN_INDEX_DB_NAME=human_index_db
HUMAN_INDEX_CORS_ORIGINS=["https://humanindex.io"]
HUMAN_INDEX_IMAGE_TAG=latest  # or sha-xxxxxxx
HUMAN_INDEX_ENVIRONMENT=production
HUMAN_INDEX_PUBLIC_BASE_URL=https://humanindex.io
HUMAN_INDEX_POSTMARK_API_TOKEN=change-me-postmark-server-token
HUMAN_INDEX_MAIL_FROM=Human Index <records@humanindex.io>
HUMAN_INDEX_MAIL_REPLY_TO=
HUMAN_INDEX_SESSION_TTL_DAYS=30
HUMAN_INDEX_SESSION_COOKIE_NAME=humanindex_session

# =============================================================================
# richmiles.xyz
# =============================================================================
RICHMILES_XYZ_IMAGE_TAG=latest  # or sha-xxxxxxx

# =============================================================================
# Bullshit or Fit
# =============================================================================
BULLSHIT_OR_FIT_IMAGE_TAG=latest  # or sha-xxxxxxx
BULLSHIT_OR_FIT_SPARK_SWARM_API_URL=http://spark-swarm:8000/api/v1
BULLSHIT_OR_FIT_SPARK_SLUG=bullshit-or-fit
BULLSHIT_OR_FIT_CORS_ORIGINS=https://bullshitorfit.com,https://www.bullshitorfit.com

# =============================================================================
# Spark Swarm
# =============================================================================
SPARK_SWARM_DB_USER=spark_swarm
SPARK_SWARM_DB_PASSWORD=change-me-spark-swarm-password
SPARK_SWARM_DB_NAME=spark_swarm_db
SPARK_SWARM_IMAGE_TAG=latest
SPARK_SWARM_MASTER_KEY=change-me-master-key  # Used to encrypt secrets at rest
SPARK_SWARM_API_KEY=change-me-api-key  # Required to access the SparkSwarm secrets API
SPARK_SWARM_AUTH_DISABLED=false  # Set true only for local/dev
CLOUDFLARE_API_TOKEN=  # Cloudflare API token with DNS/registrar scope
CLOUDFLARE_ACCOUNT_ID=  # Cloudflare Account ID for registrar lookups
MAILGUN_WEBHOOK_SIGNING_KEY=  # Mailgun domain webhook signing key
EMAIL_SYNC_ENABLED=false
EMAIL_SYNC_INTERVAL_SECONDS=300
MXROUTE_HOST=shadow.mxrouting.net
MXROUTE_PORT=993
MXROUTE_IMAP_HOST=shadow.mxrouting.net
MXROUTE_IMAP_PORT=993

# Uptime prober (Spark Swarm fleet monitoring)
UPTIME_INTERVAL_SECONDS=60
UPTIME_TIMEOUT_SECONDS=5
UPTIME_FAILS_FOR_DOWN=3
UPTIME_SUCCESSES_FOR_UP=2

# Leads mailer + worker
LEADS_SMTP_HOST=shadow.mxrouting.net
LEADS_SMTP_PORT=587
LEADS_SMTP_USERNAME=noreply@sparkswarm.com
LEADS_SMTP_PASSWORD=change-me-leads-smtp-password
LEADS_SMTP_USE_TLS=true
LEADS_MAIL_FROM=Spark Swarm <noreply@sparkswarm.com>
LEADS_MAIL_REPLY_TO=support@sparkswarm.com
LEADS_WORKER_INTERVAL_SECONDS=300

# =============================================================================
# Postgres backup automation
# =============================================================================
DB_BACKUP_LOCAL_DIR=/root/backups
DB_BACKUP_PREFIX=spark_swarm
DB_BACKUP_SPACES_PREFIX=postgres
DB_BACKUP_HEALTH_MAX_AGE_HOURS=25
